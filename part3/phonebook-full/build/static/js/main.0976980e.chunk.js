(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),u=n(6),i=n(3),o=n(2),a=n(4),s=n.n(a),d="/api/persons",b={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},post:function(e){return s.a.post(d,e).then((function(e){return e.data}))},del:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},put:function(e,t){return s.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},j=n(0),f=function(e){var t=e.filterFun;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{onChange:t})]})},l=function(e){var t=e.submitFun,n=e.nameOnchange,r=e.numberOnchange;return Object(j.jsxs)("form",{style:{margin:20,fontSize:20},onSubmit:t,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:n})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:r})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.persons,n=e.handleDelete;return Object(j.jsx)("div",{children:t.map((function(e){return Object(j.jsxs)("p",{children:[e.name," ",e.number," ",Object(j.jsx)("button",{onClick:n(e.id),children:"delete"})]},e.id)}))})},m=function(e){var t=e.message,n={display:"inline-block",color:"rgb(98, 15, 153)",fontStyle:"italic",padding:10,margin:5,fontSize:20,border:"2px solid ".concat(t.err?"red":"green"),borderRadius:3,background:"rgba(76, ".concat(t.err?"10":"150",", 80, 0.3)")};return t.text?Object(j.jsx)("div",{style:n,children:t.text}):Object(j.jsx)("div",{})},O=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),a=Object(i.a)(c,2),s=a[0],d=a[1],O=Object(o.useState)(""),x=Object(i.a)(O,2),p=x[0],g=x[1],v=Object(o.useState)(""),w=Object(i.a)(v,2),k=w[0],y=w[1],S=Object(o.useState)({}),A=Object(i.a)(S,2),C=A[0],D=A[1];Object(o.useEffect)((function(){b.getAll().then((function(e){return r(e)}))}),[]);var F=n.filter((function(e){return new RegExp(k,"i").test(e.name)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{message:C}),Object(j.jsx)(f,{filterFun:function(e){return y(e.target.value)}}),Object(j.jsx)("h2",{children:"Add a new"}),Object(j.jsx)(l,{submitFun:function(e){e.preventDefault();var t=n.find((function(e){return e.name===s}));if(t)window.confirm("".concat(s," is alrady added to phonebook, replace the old number with a new one?"))&&b.put(t.id,Object(u.a)(Object(u.a)({},t),{},{number:p})).then((function(e){r(n.map((function(n){return n.id===t.id?n=e:n}))),D({text:"".concat(s,"'s number has changed"),err:!1}),setTimeout((function(){return D({text:"",err:!1})}),3e3)})).catch((function(e){D({text:"".concat(s," has already been removed from server"),err:!0}),setTimeout((function(){return D({text:"",err:!1})}),3e3)}));else{var c={name:s,number:p};b.post(c).then((function(e){r(n.concat(e)),D({text:"Added ".concat(s),err:!1}),setTimeout((function(){return D({text:"",err:!1})}),3e3)}))}},nameOnchange:function(e){return d(e.target.value)},numberOnchange:function(e){return g(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(h,{persons:F,handleDelete:function(e){return function(){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t))&&b.del(e).then(b.getAll).then((function(e){return r(e)})).catch((function(e){D({text:"".concat(s," has already been removed from server"),err:!0}),setTimeout((function(){return D({text:"",err:!1})}),3e3)}))}}})]})};c.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.0976980e.chunk.js.map