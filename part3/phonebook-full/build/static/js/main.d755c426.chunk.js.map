{"version":3,"sources":["services/phone_book_service.js","components.js","App.js","index.js"],"names":["base_url","services","getAll","axios","get","then","res","data","post","person","del","id","delete","put","obj","Filter","filterFun","onChange","PersonForm","submitFun","nameOnchange","numberOnchange","style","margin","fontSize","onSubmit","type","Persons","persons","handleDelete","map","name","number","onClick","Notification","message","styleObj","display","color","fontStyle","padding","border","err","borderRadius","background","text","App","useState","setPersons","newName","setNewName","newNumber","setNewnumber","newFilter","setNewfilter","notifMessage","setNotifMessage","useEffect","response","showPersons","filter","RegExp","test","e","target","value","preventDefault","alreadyExist","find","el","window","confirm","console","log","setTimeout","catch","error","postObject","concat","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d755c426.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst base_url = '/api/persons'\r\n\r\nconst getAll = () =>\r\n    axios\r\n        .get(base_url)\r\n        .then(res => res.data)\r\n\r\nconst post = (person) =>\r\n    axios\r\n        .post(base_url, person)\r\n        .then(res => res.data)\r\n\r\nconst del = (id) =>\r\n    axios\r\n        .delete(`${base_url}/${id}`)\r\n        .then(res => res.data)\r\n\r\nconst put = (id, obj) =>\r\n    axios\r\n        .put(`${base_url}/${id}`, obj)\r\n        .then(res => res.data)\r\n\r\nconst services = { getAll, post, del, put }\r\n\r\nexport default services","import React from 'react'\r\n\r\nexport const Filter = ({ filterFun }) => <div>filter shown with <input onChange={filterFun} /></div>\r\n\r\nexport const PersonForm = ({ submitFun, nameOnchange, numberOnchange }) => {\r\n\r\n    return (\r\n        <form style={{\r\n            margin: 20,\r\n            fontSize: 20\r\n        }} onSubmit={submitFun}>\r\n            <div>name: <input onChange={nameOnchange} /></div>\r\n            <div>number: <input onChange={numberOnchange} /></div>\r\n            <div><button type=\"submit\">add</button></div>\r\n        </form>\r\n    )\r\n}\r\nexport const Persons = ({ persons, handleDelete }) =>\r\n    <div>\r\n        {persons.map(person =>\r\n            <p key={person.id}>\r\n                {person.name} {person.number} <button onClick={handleDelete(person.id)}>delete</button>\r\n            </p>)}\r\n    </div>\r\n\r\nexport const Notification = ({ message }) => {\r\n    const styleObj = {\r\n        display: 'inline-block',\r\n        color: 'rgb(98, 15, 153)',\r\n        fontStyle: 'italic',\r\n        padding: 10,\r\n        margin: 5,\r\n        fontSize: 20,\r\n        border: `2px solid ${message.err ? 'red' : 'green'}`,\r\n        borderRadius: 3,\r\n        background: `rgba(76, ${message.err ? '10' : '150'}, 80, 0.3)`,\r\n    }\r\n    if (message.text)\r\n        return (\r\n            <div style={styleObj}>\r\n                {message.text}\r\n            </div>\r\n        )\r\n    else\r\n        return <div></div>\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\nimport services from './services/phone_book_service'\nimport { Filter, PersonForm, Persons, Notification } from './components'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewnumber] = useState('')\n  const [newFilter, setNewfilter] = useState('')\n  const [notifMessage, setNotifMessage] = useState({})\n  const handleNameInput = e => setNewName(e.target.value)\n  const handleNumberInput = e => setNewnumber(e.target.value)\n  const filterFun = e => setNewfilter(e.target.value)\n\n  useEffect(() => {\n    services\n      .getAll()\n      .then(response => setPersons(response))\n  }, [])\n\n  const addName = (e) => {\n    e.preventDefault()\n\n    const alreadyExist = persons.find(el => el.name === newName)\n\n    if (alreadyExist) {\n      if (window.confirm(`${newName} is alrady added to phonebook, replace the old number with a new one?`)) {\n        services\n          .put(alreadyExist.id, { ...alreadyExist, number: newNumber })\n          .then(res => {\n            console.log(res);\n            setPersons(\n              persons.map(el => el.id === alreadyExist.id ? res : el)\n            )\n            setNotifMessage({ text: `${newName}'s number has changed`, err: false })\n            setTimeout(() => setNotifMessage({ text: '', err: false }), 3000)\n          })\n          .catch(err => {\n            setNotifMessage({ text: err.response.data.error, err: true })\n            setTimeout(() => setNotifMessage({ text: '', err: false }), 3000)\n          })\n      }\n    }\n    else {\n      const postObject = { name: newName, number: newNumber }\n      services\n        .post(postObject)\n        .then(res => {\n          setPersons(persons.concat(res))\n          setNotifMessage({ text: `Added ${newName}`, err: false })\n          setTimeout(() => setNotifMessage({ text: '', err: false }), 3000)\n        })\n        .catch(error => {\n          setNotifMessage({ text: error.response.data.error, err: true })\n          setTimeout(() => setNotifMessage({ text: '', err: false }), 3000)\n        })\n    }\n  }\n\n  const handleDelete = id => () => {\n    const person = persons.find(p => p.id === id).name\n    if (window.confirm(`Delete ${person}`))\n      services\n        .del(id)\n        .then(services.getAll)\n        .then(res => setPersons(res))\n        .catch(err => {\n          setNotifMessage({ text: `${newName} has already been removed from server`, err: true })\n          setTimeout(() => setNotifMessage({ text: '', err: false }), 3000)\n        })\n  }\n\n  const showPersons = persons.filter(person =>\n    new RegExp(newFilter, 'i').test(person.name))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notifMessage} />\n      <Filter filterFun={filterFun} />\n      <h2>Add a new</h2>\n      <PersonForm submitFun={addName}\n        nameOnchange={handleNameInput}\n        numberOnchange={handleNumberInput} />\n      <h2>Numbers</h2>\n      <Persons persons={showPersons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}